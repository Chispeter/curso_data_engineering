version: 2

models:
  - name: stg_sql_server_dbo__addresses # CHECKED
    description: Data about registered addresses.
    columns:
      - name: address_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate address.
      - name: address_street_number
        tests:
          - not_null
        description: Street number associated with the address identifier.
      - name: address_street_name
        tests:
          - not_null
        description: Street name associated with the address identifier.
      - name: address_state_name
        tests:
          - not_null
        description: State name associated with the address identifier.
      - name: address_zipcode
        tests:
          - not_null
        description: Zipcode associated with the address identifier.
      - name: address_country_name
        tests:
          - not_null
        description: Country name associated with the address identifier.
      - name: was_this_address_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether address row data was deleted.
      - name: address_batched_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the address row data was loaded (inserted or updated).

  - name: stg_sql_server_dbo__customers # CHECKED
    description: Data about registered customers.
    columns:
      - name: customer_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate customer.
      - name: customer_address_id
        tests:
          - not_null
          - relationships:
              field: address_id
              to: ref('stg_sql_server_dbo__addresses')
        description: Foreign key reference to the addresses table.
      - name: customer_first_name
        tests:
          - not_null
        description: First name associated with customer identifier.
      - name: customer_last_name
        tests:
          - not_null
        description: Last name associated with customer identifier.
      - name: customer_phone_number
        tests:
          - not_null
        description: Phone number associated with customer identifier.
      - name: customer_email
        tests:
          - not_null
        description: Email associated with customer identifier.
      - name: customer_number_of_total_orders
        description: Number of total orders placed by the customer identifier.
      - name: customer_created_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the customer identifier was created.
      - name: customer_updated_at_utc
        description: Date and time in UTC that the customer identifier was updated.
      - name: was_this_customer_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether customer row data was deleted.
      - name: customer_batched_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the customer row data was loaded (inserted or updated).
      
  # MISSING DATE MODEL

  - name: stg_sql_server_dbo__events # CHECKED
    description: Data about registered events created by visits to a web page.
    columns:
      - name: event_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate event.
      - name: event_customer_id
        tests:
          - not_null
          - relationships:
              field: customer_id
              to: ref('stg_sql_server_dbo__customers')
        description: Foreign key reference to the users table.
      - name: event_product_id
        tests:
          - not_null
          - relationships:
              field: product_id
              to: ref('stg_sql_server_dbo__products')
        description: Foreign key reference to the products table.
      - name: event_order_id
        tests:
          - not_null
          - relationships:
              field: order_id
              to: ref('stg_sql_server_dbo__orders')
        description: Foreign key reference to the orders table.
      - name: event_session_id
        tests:
          - not_null
        description: Foreign key reference to an unknown sessions table.
      - name: event_created_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the event was created.
      - name: event_page_url
        tests:
          - not_null
        description: URL website where the event took place.
      - name: event_type
        tests:
          - not_null
          - accepted_values:
              values: ['add_to_cart', 'checkout', 'package_shipped', 'page_view']
              quote: true
        description: Operation type carried out by the customer identifier.
      - name: was_this_event_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether event row data was deleted.
      - name: event_batched_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the event row data was loaded (inserted or updated).

  - name: stg_sql_server_dbo__order_products
    description: Data about number of units of registered product that have been sold in each registered order.
    columns:
      - name: order_product_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate order line.
      - name: order_id
        tests:
          - not_null
          - relationships:
              field: order_id
              to: ref('stg_sql_server_dbo__orders')
        description: Foreign key reference to the orders table.
      - name: product_id
        tests:
          - not_null
          - relationships:
              field: product_id
              to: ref('stg_sql_server_dbo__products')
        description: Foreign key reference to the products table.
      - name: number_of_units_of_product_sold
        tests:
          - not_null
        description: Number of units of product sold associated with the order product identifier.
      - name: was_this_order_product_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether order product row data was deleted.
      - name: order_product_batched_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the order product row data was loaded (inserted or updated).

  - name: stg_sql_server_dbo__orders # CHECKED
    description: Data about registered orders.
    columns:
      - name: order_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate order.
      - name: customer_id
        tests:
          - not_null
          - relationships:
              field: customer_id
              to: ref('stg_sql_server_dbo__customers')
        description: Foreign key reference to the customers table.
      - name: order_address_id
        tests:
          - not_null
          - relationships:
              field: address_id
              to: ref('stg_sql_server_dbo__addresses')
        description: Foreign key reference to the addresses table.
      - name: promotion_id
        tests:
          - relationships:
              field: promotion_id
              to: ref('stg_sql_server_dbo__promotions')
        description: Foreign key reference to the promotions table.
      - name: tracking_id
        description: Foreign key reference to an unknown trackings table.
      - name: shipping_service_name
        description: Shipping service name associated with the order identifier.
      - name: shipping_service_cost_in_usd
        tests:
          - positive_values
        description: Shipping service cost in USD associated with the order identifier.
      - name: order_cost_in_usd
        tests:
          - positive_values
        description: Order cost in USD associated with the order identifier.
      - name: total_order_cost_in_usd
        tests:
          - positive_values
        description: Order total cost (shipping service cost + order cost) in USD associated with the order identifier.
      - name: order_status
        tests:
          - not_null
          - accepted_values:
              values: ['delivered', 'preparing', 'shipped']
              quote: true
        description: Order status associated with the order identifier.
      - name: order_created_at_utc
        description: Date and time in UTC that the order was created.
      - name: order_estimated_delivery_at_utc
        description: Date and time in UTC that the order delivery was estimated.
      - name: order_delivered_at_utc
        description: Date and time in UTC that the order delivery was performed.
      - name: was_this_order_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether order row data was deleted.
      - name: order_batched_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the order row data was loaded (inserted or updated).

  - name: stg_sql_server_dbo__products # CHECKED
    description: Data about registered products.
    columns:
      - name: product_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate product.
      - name: product_name
        tests:
          - not_null
        description: Product name associated with product identifier.
      - name: product_price_in_usd
        tests:
          - positive_values
        description: Product price in USD associated with product identifier.
      - name: number_of_units_of_product_in_inventory
        tests:
          - positive_values
        description: Number of units of product in inventory associated with product identifier.
      - name: was_this_product_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether product row data was deleted.
      - name: product_load_date
        tests:
          - not_null
        description: Date that the product row data was loaded (inserted or updated).

  - name: stg_sql_server_dbo__promotions # CHECKED
    description: Data about registered promotions.
    columns:
      - name: promotion_id
        tests:
          - unique
          - not_null
        description: Primary key, a unique ID value for each row. Each row represents a separate promotion.
      - name: promotion_name
        tests:
          - not_null
        description: Promotion name associated with promotion identifier.
      - name: promotion_discount_in_percentage
        tests:
          - not_null
          - positive_values
        description: Promotion discount in percentage (%) associated with promotion identifier.
      - name: promotion_status
        tests:
          - accepted_values:
              values: ['active', 'inactive']
              quote: true
        description: Number of units of product in inventory associated with promotion identifier.
      - name: was_this_promotion_row_deleted
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
              quote: false
        description: Boolean indicating whether promotion row data was deleted.
      - name: promotion_batched_at_utc
        tests:
          - not_null
        description: Date and time in UTC that the promotion row data was loaded (inserted or updated).

  